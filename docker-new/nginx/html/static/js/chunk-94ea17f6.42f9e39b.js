(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94ea17f6","chunk-af2acd5e","chunk-42d34b1d","chunk-0b03f9c5","chunk-22a8a506","chunk-ecd943f2","chunk-70cce89e","chunk-3ea464a3"],{"0a87":function(t,e,a){},"179f":function(t,e,a){"use strict";a("7e3a")},"18ba":function(t,e,a){},"1f04":function(t,e,a){},"21e0":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return o}));var n=a("b775");function r(t){return Object(n["a"])({url:"/agriculture/log/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/agriculture/log/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/agriculture/log",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/agriculture/log",method:"put",data:t})}function o(t){return Object(n["a"])({url:"/agriculture/log/"+t,method:"delete"})}},"27f0":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return o}));var n=a("b775");function r(t){return Object(n["a"])({url:"/agriculture/employee/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/agriculture/employee/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/agriculture/employee",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/agriculture/employee",method:"put",data:t})}function o(t){return Object(n["a"])({url:"/agriculture/employee/"+t,method:"delete"})}},"35c5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{attrs:{value:t.form.landName+" / "+t.form.batchName+" / "+t.form.taskName,placeholder:"",size:"small",clearable:""}}),a("el-form",{ref:"form",attrs:{"label-position":"top",model:t.form,rules:t.rules,"label-width":"0"}},[a("el-row",{staticClass:"margin-top-20"},[a("el-col",{staticClass:"flex aic",attrs:{span:4}},[a("status-select",{on:{change:t.submitForm},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[t._v(" 当前状态 ")])],1),a("el-col",{staticClass:"flex aic",attrs:{span:4}},[a("el-form-item",{staticClass:"margin-bottom-0",attrs:{label:"",size:"normal",prop:"taskHead"}},[a("radio-select",{attrs:{options:t.employeeList,"key-name":"employeeName","value-name":"employeeId"},on:{change:t.submitForm},model:{value:t.form.taskHead,callback:function(e){t.$set(t.form,"taskHead",e)},expression:"form.taskHead"}},[t._v("责任人")])],1)],1),a("el-col",{staticClass:"flex aic",attrs:{span:4}},[a("calendar-select",{attrs:{disabled:""},on:{change:t.submitForm},model:{value:t.form.planStart,callback:function(e){t.$set(t.form,"planStart",e)},expression:"form.planStart"}},[t._v("计划开始时间")])],1),a("el-col",{staticClass:"flex aic",attrs:{span:4}},[a("calendar-select",{attrs:{disabled:""},on:{change:t.submitForm},model:{value:t.form.planFinish,callback:function(e){t.$set(t.form,"planFinish",e)},expression:"form.planFinish"}},[t._v("计划完成时间")])],1),a("el-col",{staticClass:"flex aic",attrs:{span:4}},[a("calendar-select",{on:{change:t.submitForm},model:{value:t.form.actualStart,callback:function(e){t.$set(t.form,"actualStart",e)},expression:"form.actualStart"}},[t._v("实际开始时间")])],1),a("el-col",{staticClass:"flex aic",attrs:{span:4}},[a("calendar-select",{on:{change:t.submitForm},model:{value:t.form.actualFinish,callback:function(e){t.$set(t.form,"actualFinish",e)},expression:"form.actualFinish"}},[t._v("实际结束时间")])],1)],1),a("el-tabs",{staticClass:"margin-top-20",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"taskInfo"},scopedSlots:t._u([{key:"label",fn:function(){return[a("i",{staticClass:"el-icon-document-checked"}),t._v(" 任务信息 ")]},proxy:!0}])},[a("div",[t._v("任务详情：")]),t.remarkOpen?t._e():[t.form.remark?a("div",{staticClass:"margin-top-15"},[t._v(" "+t._s(t.form.remark)+" "),a("span",{staticClass:"font-color-primary margin-left-10 cursor-point",on:{click:function(e){t.remarkOpen=!0}}},[t._v("编辑")])]):t._e(),t.form.remark?t._e():a("div",{staticClass:"margin-top-15"},[t._v(" --暂无描述-- "),a("span",{staticClass:"font-color-primary margin-left-10 cursor-point",on:{click:function(e){t.remarkOpen=!0}}},[t._v("添加描述")])])],t.remarkOpen?[a("el-input",{staticClass:"margin-top-10",attrs:{type:"textarea",rows:20,resize:"none",placeholder:"",maxlength:-1,"show-word-limit":!1,autosize:{minRows:2,maxRows:4}},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}}),a("el-button-group",{staticClass:"margin-top-5 float-right"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.submitForm(),t.remarkOpen=!1}}},[t._v(" 确定")]),a("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){t.remarkOpen=!1}}},[t._v("取消")])],1)]:t._e(),a("div",{staticClass:"margin-top-30"},[t._v("人员信息：")]),a("multiple-select",{staticClass:"margin-top-15",attrs:{options:t.employeeList,"key-name":"employeeName","value-name":"employeeId"},on:{change:t.handleTaskEmployeeChange},model:{value:t.selectEmployeeList,callback:function(e){t.selectEmployeeList=e},expression:"selectEmployeeList"}}),a("div",{staticClass:"flex aic margin-top-15 margin-bottom-15"},[a("span",{staticClass:"fwb flex00a padding-right-5 font-weight-bold font-size-15"},[t._v("操作信息")]),a("div",{staticClass:"height-1 flex1",staticStyle:{background:"#DCDFE6"}})]),a("div",{staticClass:"height-150 overflow-auto"},t._l(t.logList,(function(e,n){return a("div",{key:n,staticClass:"line-height-30"},[t._v(" "+t._s(n+1)+"、"+t._s(e.createTime)+" ， 由"),a("span",{staticClass:"font-color-warning font-weight-bold padding-lr-5"},[t._v(t._s(e.operName))]),a("span",[t._v(t._s(e.operDes))])])})),0)],2),a("el-tab-pane",{attrs:{name:"costEmployee"},scopedSlots:t._u([{key:"label",fn:function(){return[a("i",{staticClass:"el-icon-user"}),t._v(" 人工工时 ")]},proxy:!0}])},[a("cost-employee",{attrs:{"task-id":t.taskId},on:{log:t.getLoglist}})],1),a("el-tab-pane",{attrs:{name:"costMachine"},scopedSlots:t._u([{key:"label",fn:function(){return[a("i",{staticClass:"el-icon-truck"}),t._v(" 机械工时 ")]},proxy:!0}])},[a("cost-machine",{attrs:{"task-id":t.taskId},on:{log:t.getLoglist}})],1),a("el-tab-pane",{attrs:{name:"costMaterial"},scopedSlots:t._u([{key:"label",fn:function(){return[a("i",{staticClass:"el-icon-suitcase-1"}),t._v(" 农资用量 ")]},proxy:!0}])},[a("cost-material",{attrs:{taskId:t.taskId},on:{log:t.getLoglist}})],1),a("el-tab-pane",{attrs:{name:"annex"},scopedSlots:t._u([{key:"label",fn:function(){return[a("i",{staticClass:"el-icon-paperclip"}),t._v(" 附件 ")]},proxy:!0}])},[a("div",{staticClass:"font-weight-bold"},[t._v("图片:")]),a("image-upload",{staticClass:"margin-top-10",attrs:{"is-rectangle":!0,"is-show-tip":!1},on:{change:t.submitForm},model:{value:t.form.taskImages,callback:function(e){t.$set(t.form,"taskImages",e)},expression:"form.taskImages"}}),a("div",{staticClass:"font-weight-bold margin-top-10"},[t._v("视频:")]),a("video-upload",{staticClass:"margin-top-10",on:{change:t.submitForm},model:{value:t.form.taskVideos,callback:function(e){t.$set(t.form,"taskVideos",e)},expression:"form.taskVideos"}})],1)],1)],1)],1)},r=[],i=a("c14f"),l=a("1da1"),s=(a("caad"),a("d81d"),a("a9e3"),a("d3b7"),a("2532"),a("0643"),a("a573"),a("ddb0"),a("ec3c")),o=a("e36c"),u=a("c0c7"),c=a("b9d0"),d=a("21e0"),m=a("aa3a"),f=a("27f0"),p=a("45f4"),h=a("92e1"),g=a("d177"),v=a("8800"),b=a("ae80"),k=a("e0cd"),y=a("665f"),w=a("731d"),I={name:"TaskDetail",components:{MultipleSelect:v["default"],CalendarSelect:g["default"],RadioSelect:h["default"],StatusSelect:b["default"],CostEmployee:k["default"],CostMachine:y["default"],CostMaterial:w["default"]},props:{taskId:{type:Number},oprType:{type:String,default:""},batchId:{type:Number}},data:function(){return{activeName:"taskInfo",batchList:[],userList:[],landList:[],batchTaskStatusList:[],selectEmployeeList:[],employeeList:[],logList:[],remarkOpen:!1,form:{},rules:{taskHead:[{required:!0,message:"任务名称不能为空",trigger:"blur"}]}}},watch:{oprType:{handler:function(t,e){t.includes("add")?this.handleAdd():t.includes("update")&&this.handleUpdate()},immediate:!0}},created:function(){this.getBatchList(),this.getUserList(),this.getLandList(),this.getBatchTaskStatusList(),this.getLoglist(),this.getEmployeeList(),this.getTaskEmployee()},methods:{getBatchList:function(){var t=this;Object(o["d"])().then((function(e){t.batchList=e.rows}))},getUserList:function(){var t=this;Object(u["g"])().then((function(e){t.userList=e.rows}))},getEmployeeList:function(){var t=this;Object(f["d"])().then((function(e){t.employeeList=e.rows}))},getLandList:function(){var t=this;Object(c["d"])().then((function(e){t.landList=e.rows}))},getTaskEmployee:function(){var t=this;Object(p["e"])({taskId:this.taskId}).then((function(e){var a=e.rows;t.selectEmployeeList=a.map((function(t){return t.employeeId}))}))},getLoglist:function(){var t=this;Object(d["d"])({taskId:this.taskId}).then((function(e){t.logList=e.rows}))},getBatchTaskStatusList:function(){var t=this;Object(m["e"])({dictType:"agriculture_batch_task_status"}).then((function(e){t.batchTaskStatusList=e.rows}))},reset:function(){this.form={taskId:null,batchId:null,taskName:null,planStart:null,planFinish:null,actualStart:null,actualFinish:null,taskDetail:null,taskImages:null,taskVideos:null,remark:null,status:"0",orderNum:null,createBy:null,createTime:null,updateBy:null,updateTime:null,delFlag:null,userName:null,batchHead:null},this.resetForm("form")},handleAdd:function(){this.reset(),this.open=!0,this.title="添加批次任务"},handleUpdate:function(){var t=this;this.reset();var e=this.taskId;Object(s["c"])(e).then((function(e){t.form=e.data}))},addTaskLog:function(t){var e=this;return Object(l["a"])(Object(i["a"])().m((function a(){return Object(i["a"])().w((function(a){while(1)switch(a.n){case 0:return a.n=1,Object(d["a"])({taskId:e.taskId,operDes:t});case 1:e.getLoglist();case 2:return a.a(2)}}),a)})))()},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(null!=t.form.taskId?Object(s["e"])(t.form).then((function(e){t.addTaskLog("完善项目信息"),t.$modal.msgSuccess("修改成功")})):Object(s["a"])(t.form).then((function(e){t.$modal.msgSuccess("新增成功")})))}))},handleTaskEmployeeChange:function(t){var e=this,a=t.type,n=t.value;t.values;"add"===a?Object(p["a"])({taskId:this.taskId,employeeId:n}).then((function(t){e.addTaskLog("增加参与人员"),e.$modal.msgSuccess("添加成功")})):"del"===a&&Object(p["c"])(this.taskId,n).then((function(t){e.addTaskLog("删除参与人员"),e.$modal.msgSuccess("删除成功")}))}}},_=I,L=(a("c437"),a("2877")),S=Object(L["a"])(_,n,r,!1,null,"0bb9a18f",null);e["default"]=S.exports},3900:function(t,e,a){},"45f4":function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"f",(function(){return s})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return u}));var n=a("b775");function r(t){return Object(n["a"])({url:"/agriculture/taskEmployee/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/agriculture/taskEmployee/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/agriculture/taskEmployee",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/agriculture/taskEmployee",method:"put",data:t})}function o(t){return Object(n["a"])({url:"/agriculture/taskEmployee/"+t,method:"delete"})}function u(t,e){return Object(n["a"])({url:"/agriculture/taskEmployee/"+t+"/"+e,method:"delete"})}},"5ce2":function(t,e,a){"use strict";a("1f04")},"665f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"padding-bottom-10"},[a("el-alert",{attrs:{title:"登记机械工时",type:"info","show-icon":"",description:"此处可以登记机械工时"}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"margin-top-10",attrs:{data:t.costMachineList}},[a("el-table-column",{attrs:{label:"机械",align:"center",prop:"machineId"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("data-tag",{attrs:{options:t.machineInfoList,value:e.row.machineId,labelName:"machineName",valueName:"machineId",type:"notag"}})]}}])}),a("el-table-column",{attrs:{label:"机械数量",align:"center",prop:"machineCount"}}),a("el-table-column",{attrs:{label:"工时",align:"center",prop:"workingHours"}}),a("el-table-column",{attrs:{label:"开始日期",align:"center",prop:"workingStart",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parseTime(e.row.workingStart,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"结束日期",align:"center",prop:"workingFinish",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parseTime(e.row.workingFinish,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"header",fn:function(){return[a("el-tag",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["agriculture:costMachine:add"],expression:"['agriculture:costMachine:add']"}],staticClass:"cursor-pointer",on:{click:t.handleAdd}},[t._v("新增")])]},proxy:!0},{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["agriculture:costMachine:edit"],expression:"['agriculture:costMachine:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["agriculture:costMachine:remove"],expression:"['agriculture:costMachine:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),a("el-dialog",{attrs:{title:t.title,visible:t.open,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"机械ID",prop:"machineId"}},[a("el-select",{staticClass:"display-block",attrs:{placeholder:"请选择机械"},model:{value:t.form.machineId,callback:function(e){t.$set(t.form,"machineId",e)},expression:"form.machineId"}},t._l(t.machineInfoList,(function(t){return a("el-option",{key:t.machineId,attrs:{label:t.machineName,value:t.machineId}})})),1)],1),a("el-form-item",{attrs:{label:"机械数量",prop:"machineCount"}},[a("el-input",{attrs:{placeholder:"请输入机械数量"},model:{value:t.form.machineCount,callback:function(e){t.$set(t.form,"machineCount",e)},expression:"form.machineCount"}})],1),a("el-form-item",{attrs:{label:"工时",prop:"workingHours"}},[a("el-input",{attrs:{placeholder:"请输入工时"},model:{value:t.form.workingHours,callback:function(e){t.$set(t.form,"workingHours",e)},expression:"form.workingHours"}})],1),a("el-form-item",{attrs:{label:"开始日期",prop:"workingStart"}},[a("el-date-picker",{staticClass:"w100",attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择开始日期"},model:{value:t.form.workingStart,callback:function(e){t.$set(t.form,"workingStart",e)},expression:"form.workingStart"}})],1),a("el-form-item",{attrs:{label:"结束日期",prop:"workingFinish"}},[a("el-date-picker",{staticClass:"w100",attrs:{clearable:"",s:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择结束日期"},model:{value:t.form.workingFinish,callback:function(e){t.$set(t.form,"workingFinish",e)},expression:"form.workingFinish"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},r=[],i=a("5530"),l=(a("a9e3"),a("b775"));function s(t){return Object(l["a"])({url:"/agriculture/costMachine/list",method:"get",params:t})}function o(t){return Object(l["a"])({url:"/agriculture/costMachine/"+t,method:"get"})}function u(t){return Object(l["a"])({url:"/agriculture/costMachine",method:"post",data:t})}function c(t){return Object(l["a"])({url:"/agriculture/costMachine",method:"put",data:t})}function d(t){return Object(l["a"])({url:"/agriculture/costMachine/"+t,method:"delete"})}var m=a("808a"),f=a("21e0"),p={name:"CostMachine",props:{taskId:{type:[Number,String]}},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,costMachineList:[],machineInfoList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,taskId:this.taskId},form:{},rules:{taskId:[{required:!0,message:"任务ID不能为空",trigger:"blur"}],machineId:[{required:!0,message:"机械ID不能为空",trigger:"blur"}],machineCount:[{required:!0,message:"机械数量不能为空",trigger:"blur"}],workingHours:[{required:!0,message:"工时不能为空",trigger:"blur"}],workingStart:[{required:!0,message:"开始日期不能为空",trigger:"blur"}],workingFinish:[{required:!0,message:"结束日期不能为空",trigger:"blur"}],delFlag:[{required:!0,message:"删除标志不能为空",trigger:"blur"}]}}},created:function(){this.getList(),this.getMachineInfList()},methods:{getList:function(){var t=this;this.loading=!0,s(this.queryParams).then((function(e){t.costMachineList=e.rows,t.total=e.total,t.loading=!1}))},getMachineInfList:function(){var t=this;Object(m["d"])().then((function(e){t.machineInfoList=e.rows}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={costId:null,taskId:this.taskId,machineId:null,machineCount:null,workingHours:null,workingStart:null,workingFinish:null,remark:null,status:"0",orderNum:null,createBy:null,createTime:null,updateBy:null,updateTime:null,delFlag:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},addTaskLog:function(t){Object(f["a"])({taskId:this.taskId,operDes:t}),this.$emit("log")},handleAdd:function(){this.reset(),this.open=!0,this.title="添加机械工时"},handleUpdate:function(t){var e=this;this.reset();var a=t.costId||this.ids;o(a).then((function(t){e.form=t.data,e.open=!0,e.title="修改机械工时"}))},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(null!=t.form.costId?c(t.form).then((function(e){t.$modal.msgSuccess("修改成功"),t.addTaskLog("修改机械工时"),t.open=!1,t.getList()})):u(t.form).then((function(e){t.$modal.msgSuccess("新增成功"),t.addTaskLog("新增机械工时"),t.open=!1,t.getList()})))}))},handleDelete:function(t){var e=this,a=t.costId||this.ids;this.$modal.confirm('是否确认删除机械工时编号为"'+a+'"的数据项？').then((function(){return d(a)})).then((function(){e.getList(),e.$modal.msgSuccess("删除成功"),e.addTaskLog("删除机械工时")})).catch((function(){}))},handleExport:function(){this.download("agriculture/costMachine/export",Object(i["a"])({},this.queryParams),"costMachine_".concat((new Date).getTime(),".xlsx"))}}},h=p,g=a("2877"),v=Object(g["a"])(h,n,r,!1,null,null,null);e["default"]=v.exports},"731d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"padding-bottom-10"},[a("el-alert",{attrs:{title:"登记农资消耗",type:"info","show-icon":"",description:"此处可以登记农资消耗"}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"margin-top-10",attrs:{data:t.costMaterialList}},[a("el-table-column",{attrs:{label:"农资",align:"center",prop:"materialId"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("data-tag",{attrs:{options:t.materialInfoList,value:e.row.materialId,labelName:"materialName",valueName:"materialId",type:"notag"}})]}}])}),a("el-table-column",{attrs:{label:"使用数量",align:"center",prop:"materialCount"}}),a("el-table-column",{attrs:{label:"计量单位",align:"center",prop:"measureUnit"}}),a("el-table-column",{attrs:{label:"开始日期",align:"center",prop:"workingStart",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parseTime(e.row.workingStart,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"结束日期",align:"center",prop:"workingFinish",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parseTime(e.row.workingFinish,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"header",fn:function(){return[a("el-tag",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["agriculture:costMaterial:add"],expression:"['agriculture:costMaterial:add']"}],staticClass:"cursor-pointer",on:{click:t.handleAdd}},[t._v("新增")])]},proxy:!0},{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["agriculture:costMaterial:edit"],expression:"['agriculture:costMaterial:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["agriculture:costMaterial:remove"],expression:"['agriculture:costMaterial:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),a("el-dialog",{attrs:{title:t.title,visible:t.open,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"农资",prop:"materialId"}},[a("el-select",{staticClass:"display-block",attrs:{placeholder:"请选择农资"},model:{value:t.form.materialId,callback:function(e){t.$set(t.form,"materialId",e)},expression:"form.materialId"}},t._l(t.materialInfoList,(function(t){return a("el-option",{key:t.materialId,attrs:{label:t.materialName,value:t.materialId}})})),1)],1),a("el-form-item",{attrs:{label:"使用数量",prop:"materialCount"}},[a("el-input",{attrs:{placeholder:"请输入使用数量"},model:{value:t.form.materialCount,callback:function(e){t.$set(t.form,"materialCount",e)},expression:"form.materialCount"}})],1),a("el-form-item",{attrs:{label:"计量单位",prop:"measureUnit"}},[a("el-input",{attrs:{placeholder:"请输入计量单位"},model:{value:t.form.measureUnit,callback:function(e){t.$set(t.form,"measureUnit",e)},expression:"form.measureUnit"}})],1),a("el-form-item",{attrs:{label:"开始日期",prop:"workingStart"}},[a("el-date-picker",{staticClass:"w100",attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择开始日期"},model:{value:t.form.workingStart,callback:function(e){t.$set(t.form,"workingStart",e)},expression:"form.workingStart"}})],1),a("el-form-item",{attrs:{label:"结束日期",prop:"workingFinish"}},[a("el-date-picker",{staticClass:"w100",attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择结束日期"},model:{value:t.form.workingFinish,callback:function(e){t.$set(t.form,"workingFinish",e)},expression:"form.workingFinish"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},r=[],i=a("5530"),l=(a("a9e3"),a("b775"));function s(t){return Object(l["a"])({url:"/agriculture/costMaterial/list",method:"get",params:t})}function o(t){return Object(l["a"])({url:"/agriculture/costMaterial/"+t,method:"get"})}function u(t){return Object(l["a"])({url:"/agriculture/costMaterial",method:"post",data:t})}function c(t){return Object(l["a"])({url:"/agriculture/costMaterial",method:"put",data:t})}function d(t){return Object(l["a"])({url:"/agriculture/costMaterial/"+t,method:"delete"})}var m=a("a85f"),f=a("21e0"),p={name:"CostMaterial",props:{taskId:{type:[Number,String]}},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,costMaterialList:[],materialInfoList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,taskId:this.taskId},form:{},rules:{taskId:[{required:!0,message:"任务ID不能为空",trigger:"blur"}],materialId:[{required:!0,message:"农资ID不能为空",trigger:"blur"}],materialCount:[{required:!0,message:"使用数量不能为空",trigger:"blur"}],measureUnit:[{required:!0,message:"计量单位不能为空",trigger:"blur"}],workingStart:[{required:!0,message:"开始日期不能为空",trigger:"blur"}],workingFinish:[{required:!0,message:"结束日期不能为空",trigger:"blur"}]}}},created:function(){this.getList(),this.getMaterialInfoList()},methods:{getList:function(){var t=this;this.loading=!0,s(this.queryParams).then((function(e){t.costMaterialList=e.rows,t.total=e.total,t.loading=!1}))},getMaterialInfoList:function(){var t=this;Object(m["d"])().then((function(e){t.materialInfoList=e.rows}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={costId:null,taskId:this.taskId,materialId:null,materialCount:null,measureUnit:null,workingStart:null,workingFinish:null,remark:null,status:"0",orderNum:null,createBy:null,createTime:null,updateBy:null,updateTime:null,delFlag:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},addTaskLog:function(t){Object(f["a"])({taskId:this.taskId,operDes:t}),this.$emit("log")},handleAdd:function(){this.reset(),this.open=!0,this.title="添加农资用量"},handleUpdate:function(t){var e=this;this.reset();var a=t.costId||this.ids;o(a).then((function(t){e.form=t.data,e.open=!0,e.title="修改农资用量"}))},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(null!=t.form.costId?c(t.form).then((function(e){t.$modal.msgSuccess("修改成功"),t.addTaskLog("修改农资用量"),t.open=!1,t.getList()})):u(t.form).then((function(e){t.$modal.msgSuccess("新增成功"),t.addTaskLog("新增农资用量"),t.open=!1,t.getList()})))}))},handleDelete:function(t){var e=this,a=t.costId||this.ids;this.$modal.confirm('是否确认删除农资用量编号为"'+a+'"的数据项？').then((function(){return d(a)})).then((function(){e.getList(),e.$modal.msgSuccess("删除成功"),e.addTaskLog("删除农资用量")})).catch((function(){}))},handleExport:function(){this.download("agriculture/costMaterial/export",Object(i["a"])({},this.queryParams),"costMaterial_".concat((new Date).getTime(),".xlsx"))}}},h=p,g=a("2877"),v=Object(g["a"])(h,n,r,!1,null,null,null);e["default"]=v.exports},"74e6":function(t,e,a){"use strict";a("fdda")},"7e3a":function(t,e,a){},"808a":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return o}));var n=a("b775");function r(t){return Object(n["a"])({url:"/agriculture/machineInfo/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/agriculture/machineInfo/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/agriculture/machineInfo",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/agriculture/machineInfo",method:"put",data:t})}function o(t){return Object(n["a"])({url:"/agriculture/machineInfo/"+t,method:"delete"})}},8800:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"multipleSelect"},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("ul",{staticClass:"selected"},t._l(t.selectList,(function(e){return a("el-tooltip",{key:e.value,attrs:{effect:"dark",content:e.label,placement:"top"}},[a("li",{staticClass:"item"},[t._v(t._s(e.label.slice(0,1))),t.disabled?t._e():a("i",{staticClass:"el-icon-close",on:{click:function(a){return t.delItem(e)}}})])])})),1),a("el-popover",{attrs:{placement:"bottom-start",width:"150",trigger:"manual","popper-class":"message-popover"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.options.length>0?a("ul",{staticClass:"group"},t._l(t.dataList,(function(e,n){return a("li",{key:n,staticClass:"multiple",style:{color:t.value.includes(e.value)?"rgb(29, 167, 106)":"#000",background:t.value.includes(e.value)?"rgb(240, 240, 240)":"#fff"},on:{click:function(a){return t.select(e)}}},[a("div",{staticClass:"label"},[t._v(t._s(e.label))]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.value.includes(e.value),expression:"value.includes(item.value)"}],staticClass:"icon"},[a("i",{staticClass:"el-icon-check"})])])})),0):a("div",{staticClass:"empty"},[t._v("无数据")]),a("div",{staticClass:"icon-add",style:{cursor:t.disabled?"not-allowed":"point"},attrs:{slot:"reference"},on:{click:function(e){t.disabled?t.visible=!1:t.visible=!0}},slot:"reference"})])],1)])},r=[],i=(a("caad"),a("d81d"),a("a434"),a("d3b7"),a("2532"),a("0643"),a("4e3e"),a("a573"),a("159b"),{name:"multipleSelect",props:{options:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},keyName:String,valueName:String,disabled:{type:Boolean,default:!1}},data:function(){return{visible:!1,selectList:[]}},mounted:function(){var t=this;document.addEventListener("mouseup",(function(e){var a=document.querySelector(".icon-add");a&&(a.contains(e.target)||(t.visible=!1))}))},methods:{select:function(t){if(!this.value.includes(t.value)){this.selectList.push(t);var e=this.selectList.map((function(t){return t.value}));this.$emit("input",e),this.value.length!=e.length&&this.$emit("change",{type:"add",value:t.value,values:e}),this.visible=!1}},delItem:function(t){this.selectList.splice(this.value.indexOf(t.value),1);var e=this.selectList.map((function(t){return t.value}));this.$emit("input",e),this.value.length!=e.length&&this.$emit("change",{type:"del",value:t.value,values:e})}},watch:{newData:{handler:function(t){var e=this,a=[];t.value.forEach((function(t){e.dataList.forEach((function(e){t==e.value&&a.push(e)}))})),this.selectList=a}}},computed:{newData:function(){var t=this.value,e=this.options;return{value:t,options:e}},dataList:function(){var t=this;return this.options.length>0?this.options.map((function(e){return{label:e[t.keyName?t.keyName:"label"],value:e[t.valueName?t.valueName:"value"]}})):[]}}}),l=i,s=(a("5ce2"),a("179f"),a("2877")),o=Object(s["a"])(l,n,r,!1,null,"69e16b4f",null);e["default"]=o.exports},"92e1":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"radioSelect",style:{cursor:t.disabled?"not-allowed":"point"}},[a("div",{staticStyle:{display:"flex","align-items":"center",height:"100%"}},[a("el-popover",{attrs:{placement:"bottom-start",width:"150",trigger:"manual","popper-class":"message-popover"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.options.length>0?a("ul",{staticClass:"group"},t._l(t.dataList,(function(e,n){return a("li",{key:n,staticClass:"radio",on:{click:function(a){return t.select(e)}}},[t._v(t._s(e.label))])})),0):a("div",{staticClass:"empty"},[t._v("无数据")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.activeName,expression:"!activeName"}],staticClass:"icon",attrs:{slot:"reference"},on:{click:function(e){t.disabled?t.visible=!1:t.visible=!0}},slot:"reference"}),a("el-avatar",{directives:[{name:"show",rawName:"v-show",value:t.activeName,expression:"activeName"}],staticStyle:{background:"rgb(0, 196, 186)"},attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.activeName?t.activeName.slice(0,1):t.activeName))])],1),a("span",{staticClass:"title"},[a("div",[t._v(t._s(t.activeName?t.activeName:"--"))]),a("div",[t._t("default")],2)]),a("div",{staticClass:"del"},[t.disabled?t._e():a("i",{staticClass:"el-icon-close",on:{click:t.clear}})])],1)])},r=[],i=(a("d81d"),a("a9e3"),a("d3b7"),a("0643"),a("4e3e"),a("a573"),a("159b"),{name:"RadioSelect",props:{value:[Number,String],options:{type:Array,default:function(){return[]}},disabled:{default:!1,type:Boolean},keyName:String,valueName:String},data:function(){return{visible:!1,activeIndex:null,activeName:null}},watch:{newData:{handler:function(t,e){var a=this;this.dataList.forEach((function(e){e.value==t.value&&a.select(e)}))}}},mounted:function(){var t=this;document.addEventListener("mouseup",(function(e){var a=document.querySelector(".radioSelect");a&&(a.contains(e.target)||(t.visible=!1))}))},computed:{newData:function(){var t=this.value,e=this.options;return{value:t,options:e}},dataList:function(){var t=this;return this.options.length>0?this.options.map((function(e){return{label:e[t.keyName?t.keyName:"label"],value:e[t.valueName?t.valueName:"value"]}})):[]}},methods:{select:function(t){this.activeIndex=t.value,this.activeName=t.label,this.$emit("input",t.value),this.visible=!1,this.value!=t.value&&this.$emit("change",t.value)},clear:function(){var t={value:null,label:""};this.select(t)}}}),l=i,s=(a("b7f0"),a("bd53"),a("2877")),o=Object(s["a"])(l,n,r,!1,null,"62d8c1d5",null);e["default"]=o.exports},"962e":function(t,e,a){"use strict";a("18ba")},a85f:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return o}));var n=a("b775");function r(t){return Object(n["a"])({url:"/agriculture/materialInfo/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/agriculture/materialInfo/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/agriculture/materialInfo",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/agriculture/materialInfo",method:"put",data:t})}function o(t){return Object(n["a"])({url:"/agriculture/materialInfo/"+t,method:"delete"})}},ae80:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"radioSelect",style:{cursor:t.disabled?"not-allowed":"point"}},[a("div",{staticStyle:{display:"flex","align-items":"center",height:"100%"}},[a("el-popover",{attrs:{placement:"bottom-start",width:"150",trigger:"manual","popper-class":"message-popover"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.options.length>0?a("ul",{staticClass:"group"},t._l(t.dataList,(function(e,n){return a("li",{key:n,staticClass:"radio",on:{click:function(a){return t.select(e)}}},[t._v(t._s(e.label))])})),0):a("div",{staticClass:"empty"},[t._v("无数据")]),a("div",{staticClass:"icon",style:{background:t.color,borderColor:t.color},attrs:{slot:"reference"},on:{click:function(e){t.disabled?t.visible=!1:t.visible=!0}},slot:"reference"},[a("i",{class:t.activeIcon,staticStyle:{color:"#fff"}})])]),a("span",{staticClass:"title"},[a("div",[t._v(t._s(t.activeName))]),a("div",[t._t("default")],2)]),a("div",{staticClass:"del"},[t.disabled?t._e():a("i",{staticClass:"el-icon-close",on:{click:t.clear}})])],1)])},r=[],i=(a("d81d"),a("a9e3"),a("d3b7"),a("0643"),a("4e3e"),a("a573"),a("159b"),{name:"StatusSelect",props:{value:[Number,String],options:{type:Array,default:function(){return[{label:"未分配",activeIcon:"el-icon-minus",color:"#F71653",value:0},{label:"已分配",activeIcon:"el-icon-s-claim",color:"#13ce66",value:1},{label:"进行中",activeIcon:"el-icon-s-promotion",color:"#ffba00",value:2},{label:"已完成",activeIcon:"el-icon-check",color:"#ff4949",value:3}]}},disabled:{default:!1,type:Boolean},keyName:String,valueName:String,colorName:String,iconName:String},data:function(){return{visible:!1,activeIndex:null,activeName:"--",activeIcon:"el-icon-minus",color:"#70B4E0"}},watch:{value:{handler:function(t){var e=this;this.dataList.forEach((function(a){a.value==t&&e.select(a)}))},immediate:!0}},mounted:function(){var t=this;document.addEventListener("mouseup",(function(e){var a=document.querySelector(".radioSelect");a&&(a.contains(e.target)||(t.visible=!1))}))},computed:{dataList:function(){var t=this;return this.options.length>0?this.options.map((function(e){return{label:e[t.keyName?t.keyName:"label"],value:e[t.valueName?t.valueName:"value"],color:e[t.colorName?t.colorName:"color"],activeIcon:e[t.iconName?t.iconName:"activeIcon"]}})):[]}},methods:{select:function(t){this.activeIndex=t.value,this.activeName=t.label,this.color=t.color,this.activeIcon=t.activeIcon,this.$emit("input",t.value),this.visible=!1,this.value!=t.value&&this.$emit("change",t.value)},clear:function(){var t={value:null,label:"--",color:"#70B4E0",activeIcon:"el-icon-minus"};this.select(t)}}}),l=i,s=(a("962e"),a("74e6"),a("2877")),o=Object(s["a"])(l,n,r,!1,null,"7b78d728",null);e["default"]=o.exports},b7f0:function(t,e,a){"use strict";a("cf46")},b9d0:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return o}));var n=a("b775");function r(t){return Object(n["a"])({url:"/agriculture/land/cropLandList",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/agriculture/land/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/agriculture/land",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/agriculture/land",method:"put",data:t})}function o(t){return Object(n["a"])({url:"/agriculture/land/"+t,method:"delete"})}},bd53:function(t,e,a){"use strict";a("3900")},c064:function(t,e,a){},c0c7:function(t,e,a){"use strict";a.d(e,"g",(function(){return i})),a.d(e,"e",(function(){return l})),a.d(e,"a",(function(){return s})),a.d(e,"j",(function(){return o})),a.d(e,"c",(function(){return u})),a.d(e,"h",(function(){return c})),a.d(e,"b",(function(){return d})),a.d(e,"f",(function(){return m})),a.d(e,"k",(function(){return f})),a.d(e,"l",(function(){return p})),a.d(e,"m",(function(){return h})),a.d(e,"d",(function(){return g})),a.d(e,"i",(function(){return v}));var n=a("b775"),r=a("c38a");function i(t){return Object(n["a"])({url:"/system/user/list",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/system/user/"+Object(r["f"])(t),method:"get"})}function s(t){return Object(n["a"])({url:"/system/user",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/system/user",method:"put",data:t})}function u(t){return Object(n["a"])({url:"/system/user/"+t,method:"delete"})}function c(t,e){var a={userId:t,password:e};return Object(n["a"])({url:"/system/user/resetPwd",method:"put",data:a})}function d(t,e){var a={userId:t,status:e};return Object(n["a"])({url:"/system/user/changeStatus",method:"put",data:a})}function m(){return Object(n["a"])({url:"/system/user/profile",method:"get"})}function f(t){return Object(n["a"])({url:"/system/user/profile",method:"put",data:t})}function p(t,e){var a={oldPassword:t,newPassword:e};return Object(n["a"])({url:"/system/user/profile/updatePwd",method:"put",params:a})}function h(t){return Object(n["a"])({url:"/system/user/profile/avatar",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/system/user/authRole/"+t,method:"get"})}function v(t){return Object(n["a"])({url:"/system/user/authRole",method:"put",params:t})}},c437:function(t,e,a){"use strict";a("c064")},c970:function(t,e,a){"use strict";a("0a87")},cf46:function(t,e,a){},d177:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"calendarSelect",style:{cursor:t.disabled?"not-allowed":"point"}},[a("div",{staticClass:"select_content"},[a("el-date-picker",{class:{disableClass:t.disabled},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",editable:!1,clearable:!1,"picker-options":t.pickerOptions,disabled:t.disabled},on:{change:t.changeData},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("div",{staticClass:"date"},[t.date?a("div",[t._v(t._s(t.date))]):a("div",[t._v("--")]),a("div",[t._t("default",[t._v("日期选择")])],2)]),a("div",{staticClass:"del"},[t.disabled?t._e():a("i",{staticClass:"el-icon-close",on:{click:t.clearDate}})])],1)])},r=[],i={name:"CalendarSelect",props:{value:{type:String},startDate:{type:String},disabled:{type:Boolean,default:!1}},data:function(){var t=this;return{date:null,pickerOptions:{disabledDate:function(e){return e.getTime()<Date.parse(t.startDate)}}}},watch:{value:{handler:function(t){this.date=t},immediate:!0},date:{handler:function(t){this.$emit("input",t)},immediate:!0}},methods:{clearDate:function(){this.date&&(this.date=null,this.$emit("change",this.date))},changeData:function(t){this.$emit("change",t)}}},l=i,s=(a("c970"),a("2877")),o=Object(s["a"])(l,n,r,!1,null,"79e6b086",null);e["default"]=o.exports},e0cd:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"padding-bottom-10"},[a("el-alert",{attrs:{title:"登记人工工时",type:"info","show-icon":"",description:"此处可以按照每个用工登记工时"}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"margin-top-10",attrs:{data:t.costEmployeeList}},[a("el-table-column",{attrs:{label:"雇员ID",align:"center",prop:"employeeId"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("data-tag",{attrs:{options:t.taskEmployeeList,value:e.row.employeeId,labelName:"employeeName",valueName:"employeeId",type:"notag"}})]}}])}),a("el-table-column",{attrs:{label:"工时",align:"center",prop:"workingHours"}}),a("el-table-column",{attrs:{label:"开始日期",align:"center",prop:"workingStart",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parseTime(e.row.workingStart,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"结束日期",align:"center",prop:"workingFinish",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.parseTime(e.row.workingFinish,"{y}-{m}-{d}")))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"header",fn:function(){return[a("el-tag",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["agriculture:costEmployee:add"],expression:"['agriculture:costEmployee:add']"}],staticClass:"cursor-pointer",on:{click:t.handleAdd}},[t._v("新增")])]},proxy:!0},{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["agriculture:costEmployee:edit"],expression:"['agriculture:costEmployee:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("修改")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["agriculture:costEmployee:remove"],expression:"['agriculture:costEmployee:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}}),a("el-dialog",{attrs:{title:t.title,visible:t.open,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"雇员ID",prop:"employeeId"}},[a("el-select",{staticClass:"display-block",attrs:{placeholder:"请选择雇员",clearable:"",filterable:""},model:{value:t.form.employeeId,callback:function(e){t.$set(t.form,"employeeId",e)},expression:"form.employeeId"}},t._l(t.taskEmployeeList,(function(t){return a("el-option",{key:t.employeeId,attrs:{label:t.employeeName,value:t.employeeId}})})),1)],1),a("el-form-item",{attrs:{label:"工时",prop:"workingHours"}},[a("el-input",{attrs:{placeholder:"请输入工时"},scopedSlots:t._u([{key:"append",fn:function(){return[t._v(" 天 ")]},proxy:!0}]),model:{value:t.form.workingHours,callback:function(e){t.$set(t.form,"workingHours",e)},expression:"form.workingHours"}})],1),a("el-form-item",{attrs:{label:"开始日期",prop:"workingStart"}},[a("el-date-picker",{staticClass:"w100",attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择开始日期"},model:{value:t.form.workingStart,callback:function(e){t.$set(t.form,"workingStart",e)},expression:"form.workingStart"}})],1),a("el-form-item",{attrs:{label:"结束日期",prop:"workingFinish"}},[a("el-date-picker",{staticClass:"w100",attrs:{clearable:"",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择结束日期"},model:{value:t.form.workingFinish,callback:function(e){t.$set(t.form,"workingFinish",e)},expression:"form.workingFinish"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},r=[],i=a("5530"),l=a("c14f"),s=a("1da1"),o=(a("a9e3"),a("b775"));function u(t){return Object(o["a"])({url:"/agriculture/costEmployee/list",method:"get",params:t})}function c(t){return Object(o["a"])({url:"/agriculture/costEmployee/"+t,method:"get"})}function d(t){return Object(o["a"])({url:"/agriculture/costEmployee",method:"post",data:t})}function m(t){return Object(o["a"])({url:"/agriculture/costEmployee",method:"put",data:t})}function f(t){return Object(o["a"])({url:"/agriculture/costEmployee/"+t,method:"delete"})}var p=a("21e0"),h=a("45f4"),g={name:"CostEmployee",props:{taskId:{type:[Number,String]}},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,costEmployeeList:[],taskEmployeeList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,taskId:this.taskId},form:{},rules:{employeeId:[{required:!0,message:"雇员ID不能为空",trigger:"blur"}],workingHours:[{required:!0,message:"工时不能为空",trigger:"blur"}],workingStart:[{required:!0,message:"开始日期不能为空",trigger:"blur"}],workingFinish:[{required:!0,message:"结束日期不能为空",trigger:"blur"}],delFlag:[{required:!0,message:"删除标志不能为空",trigger:"blur"}]}}},created:function(){this.getList(),this.getTaskEmployeeList()},methods:{getList:function(){var t=this;this.loading=!0,u(this.queryParams).then((function(e){t.costEmployeeList=e.rows,t.total=e.total,t.loading=!1}))},getTaskEmployeeList:function(){var t=this;Object(h["e"])({taskId:this.taskId}).then((function(e){t.taskEmployeeList=e.rows}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={costId:null,taskId:this.taskId,employeeId:null,workingHours:null,workingStart:null,workingFinish:null,remark:null,status:"0",orderNum:null,createBy:null,createTime:null,updateBy:null,updateTime:null,delFlag:null},this.resetForm("form")},addTaskLog:function(t){var e=this;return Object(s["a"])(Object(l["a"])().m((function a(){return Object(l["a"])().w((function(a){while(1)switch(a.n){case 0:return a.n=1,Object(p["a"])({taskId:e.taskId,operDes:t});case 1:e.$emit("log");case 2:return a.a(2)}}),a)})))()},handleAdd:function(){this.reset(),this.open=!0,this.title="添加人工工时"},handleUpdate:function(t){var e=this;this.reset();var a=t.costId||this.ids;c(a).then((function(t){e.form=t.data,e.open=!0,e.title="修改人工工时"}))},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(null!=t.form.costId?m(t.form).then((function(e){t.addTaskLog("修改人工工时"),t.$modal.msgSuccess("修改成功"),t.open=!1,t.getList()})):d(t.form).then((function(e){t.addTaskLog("新增人工工时"),t.$modal.msgSuccess("新增成功"),t.open=!1,t.getList()})))}))},handleDelete:function(t){var e=this,a=t.costId||this.ids;this.$modal.confirm('是否确认删除人工工时编号为"'+a+'"的数据项？').then((function(){return f(a)})).then((function(){e.getList(),e.addTaskLog("删除人工工时"),e.$modal.msgSuccess("删除成功")})).catch((function(){}))},handleExport:function(){this.download("agriculture/costEmployee/export",Object(i["a"])({},this.queryParams),"costEmployee_".concat((new Date).getTime(),".xlsx"))}}},v=g,b=a("2877"),k=Object(b["a"])(v,n,r,!1,null,null,null);e["default"]=k.exports},e36c:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return o}));var n=a("b775");function r(t){return Object(n["a"])({url:"/agriculture/batch/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/agriculture/batch/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/agriculture/batch",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/agriculture/batch",method:"put",data:t})}function o(t){return Object(n["a"])({url:"/agriculture/batch/"+t,method:"delete"})}},ec3c:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"b",(function(){return o}));var n=a("b775");function r(t){return Object(n["a"])({url:"/agriculture/batchTask/list",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/agriculture/batchTask/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/agriculture/batchTask",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/agriculture/batchTask",method:"put",data:t})}function o(t){return Object(n["a"])({url:"/agriculture/batchTask/"+t,method:"delete"})}},fdda:function(t,e,a){}}]);