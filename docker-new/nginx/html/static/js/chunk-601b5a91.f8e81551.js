(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-601b5a91"],{4530:function(t,o,e){},"80a0":function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"map"},[e("el-autocomplete",{staticClass:"mb8",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":t.fetchLocationData,placeholder:"请输入查询关键字"},on:{select:t.handleSelect},model:{value:t.keyword,callback:function(o){t.keyword=o},expression:"keyword"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e("div",{staticClass:"map-box",staticStyle:{width:"100%"},attrs:{id:"mapBox"}}),e("div",{staticClass:"map-tool"},[e("el-button",{attrs:{type:"primary",plain:"",size:"mini",disabled:!!this.polygon},on:{click:t.handleCreateBthClick}},[t._v("新建")]),e("el-button",{attrs:{type:"success",plain:"",size:"mini"},on:{click:t.handleCreateBthClick}},[t._v("编辑")]),e("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:t.handleClearBthClick}},[t._v("清除")]),e("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:t.handleCloseBthClick}},[t._v("结束")])],1)],1)},n=[],l=e("5530"),a=e("c14f"),s=e("1da1"),c=(e("d81d"),e("d3b7"),e("ac1f"),e("841c"),e("0643"),e("a573"),e("862d"),{name:"DrawArea",props:{polygonPath:{type:String,default:""},polygonStyle:{type:Object,default:function(){return{fillColor:"#26EB23",fillOpacity:.9,strokeColor:"#00D3FC",strokeOpacity:.9,strokeWeight:2}}}},data:function(){return{keyword:"",searchOverlays:[],polygon:null}},watch:{polygonStyle:{handler:function(t,o){this.polygon&&(this.resetPolygonStyle(),this.removePolygon(),this.addPolygon())},deep:!0}},mounted:function(){var t=this;return Object(s["a"])(Object(a["a"])().m((function o(){return Object(a["a"])().w((function(o){while(1)switch(o.n){case 0:return console.log(123,t),o.n=1,t.initMap();case 1:t.initPolygonEditor();case 2:return o.a(2)}}),o)})))()},methods:{initMap:function(){var t=this.AMap;this.map=new t.Map("mapBox",{viewMode:"3D",mapStyle:"amap://styles/802500eb9c17892dd91047988cc1ece1",zoom:16,center:[120.153106,33.348826],layers:[new t.TileLayer.Satellite]}),this.map.addControl(new t.Scale),this.map.addControl(new t.MapType),this.placeSearch=new t.PlaceSearch({city:"全国"})},initPolygonEditor:function(){var t=this,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.polygonPath&&o?(this.polygon=new AMap.Polygon({path:this.polygonPath.split("|").map((function(t){return t.split(",")}))}),this.resetPolygonStyle(),this.map.add(this.polygon),this.polygonEditor=new AMap.PolygonEditor(this.map,this.polygon)):this.polygonEditor=new AMap.PolygonEditor(this.map),this.polygonEditor.on("add",(function(o){var e=o.target;t.polygon=e,t.resetPolygonStyle()})),this.polygonEditor.on("end",(function(o){o.target;t.resetPolygonStyle()})),this.polygonEditor.on("adjust",(function(o){o.target;t.$emit("change-path",t.polygon._opts.path)}))},fetchLocationData:function(t,o){var e=this;t?(clearTimeout(this.timer),this.timer=setTimeout((function(){e.placeSearch.search(t,(function(t,e){console.log(e),o("complete"===t?e.poiList.pois.map((function(t){return Object(l["a"])(Object(l["a"])({},t),{},{value:t.address})})):[])}))}),1200)):o([])},handleSelect:function(t){var o=this.map,e=(this.searchOverlays,t.location),i=(t.address,e.lng),n=e.lat;o.panTo([i,n])},handleCreateBthClick:function(){this.polygonEditor.close(),this.polygonEditor.open()},handleCloseBthClick:function(){this.polygonEditor.close(),this.$emit("change-path",this.polygon._opts.path)},handleClearBthClick:function(){this.clearPolygonEditor()},clearPolygonEditor:function(){this.polygon=null,this.map.destroy(),this.initMap(),this.initPolygonEditor(!1)},resetPolygonStyle:function(){var t=this.polygon,o=this.polygonStyle,e=o.fillColor,i=o.fillOpacity,n=o.strokeColor,l=o.strokeOpacity,a=o.strokeWeight;t._opts.fillColor=e,t._opts.fillOpacity=i,t._opts.strokeColor=n,t._opts.strokeOpacity=l,t._opts.strokeWeight=a},removePolygon:function(){this.map.remove(this.polygon)},addPolygon:function(){this.map.add(this.polygon)}}}),r=c,p=(e("95d7"),e("2877")),h=Object(p["a"])(r,i,n,!1,null,"5c7701af",null);o["default"]=h.exports},"95d7":function(t,o,e){"use strict";e("4530")}}]);